@page
@model ServiceHost.Areas.Admin.Pages.IndexModel
@{
    ViewData["Title"] = "داشبورد";
}
<!-- Content -->
<div class="col-xl-9">

    <!-- Stats -->
    <div class="row g-4">

        <div class="col-6 col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="stats-icon">
                                <i class="bi bi-eye-fill"></i>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h6 class="fs-7 text-muted">نمایش پروفایل</h6>
                            <h6 class="fw-bold mb-0 purecounter" data-purecounter-start="0"
                                data-purecounter-end="20" data-purecounter-duration="1">
                                0
                            </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="stats-icon">
                                <i class="bi bi-eye-fill"></i>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h6 class="fs-7 text-muted">نمایش پروفایل</h6>
                            <h6 class="fw-bold mb-0 purecounter" data-purecounter-start="0"
                                data-purecounter-end="20" data-purecounter-duration="1">
                                0
                            </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="stats-icon">
                                <i class="bi bi-eye-fill"></i>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h6 class="fs-7 text-muted">نمایش پروفایل</h6>
                            <h6 class="fw-bold mb-0 purecounter" data-purecounter-start="0"
                                data-purecounter-end="20" data-purecounter-duration="1">
                                0
                            </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="stats-icon">
                                <i class="bi bi-eye-fill"></i>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h6 class="fs-7 text-muted">نمایش پروفایل</h6>
                            <h6 class="fw-bold mb-0 purecounter" data-purecounter-start="0"
                                data-purecounter-end="20" data-purecounter-duration="1">
                                0
                            </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Chart 1 -->
    <div class="row my-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between">
                        <h5>چارت من</h5>
                        <div>
                            <button class="btn btn-secondary fs-10"
                                    onclick="setStyle('circle')">
                                دایره
                            </button>
                            <button class="btn btn-secondary fs-10"
                                    onclick="setStyle('star')">
                                ستاره
                            </button>
                            <!-- <button class="btn btn-secondary fs-10" onclick="setStyle(false)">حذف نقطه</button> -->
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="ChartJs"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress -->
    <div class="row">

        <div class="col-xl-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">لورم ایپسوم متن</h5>
                </div>
                <div class="card-body">
                    <div>
                        <div class="progress">
                            <div class="progress-bar bg-purple" role="progressbar"
                                 style="width: 75%;">
                                75%
                            </div>
                        </div>
                        <p class="fs-7 text-muted mt-2">لورم ایپسوم متن ساختگی</p>
                    </div>
                    <hr>
                    <div>
                        <div class="progress">
                            <div class="progress-bar bg-blue" role="progressbar"
                                 style="width: 50%;">
                                50%
                            </div>
                        </div>
                        <p class="fs-7 text-muted mt-2">لورم ایپسوم متن ساختگی</p>
                    </div>
                    <hr>
                    <div>
                        <div class="progress">
                            <div class="progress-bar bg-green" role="progressbar"
                                 style="width: 66%;">
                                66%
                            </div>
                        </div>
                        <p class="fs-7 text-muted mt-2">لورم ایپسوم متن ساختگی</p>
                    </div>
                    <hr>
                    <div>
                        <div class="progress">
                            <div class="progress-bar bg-red" role="progressbar"
                                 style="width: 45%;" aria-valuenow="45" aria-valuemin="0"
                                 aria-valuemax="100">
                                45%
                            </div>
                        </div>
                        <p class="fs-7 text-muted mt-2">لورم ایپسوم متن ساختگی</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">آخرین کامنت ها</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead>
                                <tr>
                                    <td>تصویر</td>
                                    <td>نام کاربری</td>
                                    <td>کامنت</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <img src="~/admin_temp/images/4.jpg" alt=""
                                             class="img-fluid rounded-circle" width="35">
                                    </td>
                                    <td class="text-muted fs-8">علیرضا صیفی</td>
                                    <td class="text-muted fs-8">فقط تست هست </td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="~/admin_temp/images/4.jpg" alt=""
                                             class="img-fluid rounded-circle" width="35">
                                    </td>
                                    <td class="text-muted fs-8">علیرضا</td>
                                    <td class="text-muted fs-8">فقط تست هست </td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="~/admin_temp/images/4.jpg" alt=""
                                             class="img-fluid rounded-circle" width="35">
                                    </td>
                                    <td class="text-muted fs-8">علیرضا</td>
                                    <td class="text-muted fs-8">فقط تست هست </td>
                                </tr>
                                <tr>
                                    <td>
                                        <img src="~/admin_temp/images/4.jpg" alt=""
                                             class="img-fluid rounded-circle" width="35">
                                    </td>
                                    <td class="text-muted fs-8">علیرضا</td>
                                    <td class="text-muted fs-8">فقط تست هست </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="col-xl-3 ">

    <!-- Profile -->
    <div class="card">
        <div class="card-body d-flex align-items-center gap-2">
            <img src="~/admin_temp/images/7.jpg" alt="" class="img-fluid rounded-circle " width="70">
            <div>
                <h6 class="fw-bold">علیرضا صیفی</h6>
                <p class="text-muted mb-0 dir-ltr">@@alirezaseyfi</p>
            </div>
        </div>
    </div>

    <!-- Users -->
    <div class="card mt-2">

        <div class="card-header">
            <h5 class="fw-bold mb-0">تست </h5>
        </div>

        <div class="card-body d-flex flex-column gap-4">

            <div class="d-flex align-items-center gap-2">
                <img src="~/admin_temp/images/5.jpg" alt="" class="img-fluid rounded-circle" width="50">
                <div>
                    <h6 class="fw-bold fs-8">علیرضا صیفی</h6>
                    <p class="text-muted mb-0 dir-ltr fs-8">@@alirezaseyfi</p>
                </div>
            </div>
            <div class="d-flex align-items-center gap-2">
                <img src="~/admin_temp/images/5.jpg" alt="" class="img-fluid rounded-circle" width="50">
                <div>
                    <h6 class="fw-bold fs-8">علیرضا صیفی</h6>
                    <p class="text-muted mb-0 dir-ltr fs-8">@@alirezaseyfi</p>
                </div>
            </div>
            <div class="d-flex align-items-center gap-2">
                <img src="~/admin_temp/images/5.jpg" alt="" class="img-fluid rounded-circle" width="50">
                <div>
                    <h6 class="fw-bold fs-8">علیرضا صیفی</h6>
                    <p class="text-muted mb-0 dir-ltr fs-8">@@alirezaseyfi</p>
                </div>
            </div>
            <div class="d-grid">
                <button class="btn btn-primary fs-8">نمایش</button>
            </div>

        </div>

    </div>

    <!-- Chart 2 -->
    <div class="row">
        <div class="col-xl-12 col-6">
            <div class="card mt-2">

                <div class="card-header">
                    <h5 class="fw-bold mb-0">تست </h5>
                </div>

                <div class="card-body">
                    <div>
                        <canvas id="chart2"></canvas>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>

@section Scripts {
    <!-- Chart 1 Chart.js -->
    <script src="~/admin_temp/js/chart.js"></script>
    <script>
        const chartType = window.innerWidth < 576 ? 'bar' : 'line';

        const data = {
            labels: ['روز ۱', 'روز ۲', 'روز ۳', 'روز ۴', 'روز ۵', 'روز ۶'],
            datasets: [{
                label: 'میان داده‌ها',
                data: [10, 25, 13, 6, 5, 150],
                borderColor: 'rgba(255,0,0,1)',
                backgroundColor: 'rgba(255,0,0,0.5)',
                pointStyle: 'circle',
                pointRadius: 8,
                pointHoverRadius: 12
            }]
        };

        const config = {
            type: chartType,
            data: data,
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: (ctx) => 'شکل نقطه: ' + ctx.chart.data.datasets[0].pointStyle
                    }
                }
            }
        };

        // Create Chart
        const myChart = new Chart(
            document.getElementById('ChartJs'),
            config
        );

        // Set Style Chart
        function setStyle(style) {
            myChart.data.datasets.forEach(ds => ds.pointStyle = style);
            myChart.update();
        }

    </script>

    <!-- Chart 2 Chart.js-->
    <script>
        const dataValues = [10, 90]; // موفق ، ناموفق
        const labels = ['پرداخت موفق', 'پرداخت ناموفق'];
        const colors = ['#0984e3', '#c0392b'];

        const ctx = document.getElementById('chart2');

        const paymentChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: labels,
                datasets: [{
                    data: dataValues,
                    backgroundColor: colors,
                    borderColor: '#fff',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                weight: 'bold', // بولد کردن فونت
                                family: 'Vazir' // فونت سفارشی (مثلاً Vazir، جایگزین کنید با فونت خودتون)
                            },
                            generateLabels: function(chart) {
                                const dataset = chart.data.datasets[0];
                                const total = dataset.data.reduce((a, b) => a + b, 0);

                                return chart.data.labels.map((label, i) => {
                                    const value = dataset.data[i];
                                    const percent = ((value / total) * 100).toFixed(1) + '%';
                                    return {
                                        text: `${label} (${percent})`,
                                        fillStyle: dataset.backgroundColor[i],
                                        strokeStyle: dataset.backgroundColor[i],
                                        fontColor: '#6B7280', // رنگ خاکستری برای متن
                                        hidden: isNaN(dataset.data[i]) || chart.getDatasetMeta(0).data[i].hidden,
                                        index: i
                                    };
                                });
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let value = context.parsed;
                                let total = context.chart._metasets[0].total;
                                let percent = ((value / total) * 100).toFixed(1);
                                return `${context.label}: ${value} (${percent}%)`;
                            }
                        }
                    }
                }
            }
        });
    </script>
}